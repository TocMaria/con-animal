<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Adicionar Novo Animal</title>
  <link rel="stylesheet" href="../css/styles.css">
</head>
<body>
  <h1>Adicionar Novo Animal</h1>
  <form id="add-animal-form" method="POST" enctype="multipart/form-data">
    <label for="species">*Espécie:</label>
    <select id="species" name="species" required>
      <option value="Cachorro">Cachorro</option>
      <option value="Gato">Gato</option>
      <option value="Outros">Outros</option>
    </select>

    <label for="name">*Nome:</label>
    <input type="text" id="name" name="name" required>

    <label>*Sexo:</label>
    <label><input type="radio" name="sex" value="M" required> Macho</label>
    <label><input type="radio" name="sex" value="F" required> Fêmea</label>

    <label for="age">*Idade Aproximada (em anos):</label>
    <input type="number" id="age" name="age" required>

    <label for="weight">*Peso Aproximado (em kg):</label>
    <input type="number" id="weight" name="weight" required>

    <label for="size">*Porte:</label>
    <select id="size" name="size" required>
      <option value="PP">PP</option>
      <option value="P">P</option>
      <option value="M">M</option>
      <option value="G">G</option>
      <option value="GG">GG</option>
    </select>

    <label for="rescue_date">*Data do Resgate:</label>
    <input type="date" id="rescue_date" name="rescue_date" required>

    <label for="rescue_location">*Local do Resgate:</label>
    <input type="text" id="rescue_location" name="rescue_location" required>

    <label for="profile_photo">Foto de Perfil (URL):</label>
    <input type="file" id="profile_photo" name="profile_photo">

    <label for="gallery_public">Galeria de Imagens Pública:</label>
    <input type="file" id="gallery_public" name="gallery_public" multiple>
    
    <label for="gallery_private">Galeria de Imagens Privada:</label>
    <input type="file" id="gallery_private" name="gallery_private" multiple>

    <label for="last_location">Última Localização:</label>
    <input type="text" id="last_location" name="last_location">

    <label for="status">*Status:</label>
    <select id="status" name="status" required>
      <option value="com tutor">Com Tutor</option>
      <option value="em lar">Em Lar</option>
      <option value="adotado">Adotado</option>
      <option value="disponível">Disponível</option>
    </select>

    <label>Castrado:</label>
    <label><input type="radio" name="castrated" value="true"> Sim</label>
    <label><input type="radio" name="castrated" value="false"> Não</label>

    <label for="chip_code">Código do Chip:</label>
    <input type="text" id="chip_code" name="chip_code">

    <h3>Ficha Veterinária</h3>
    <div id="veterinary-records">
      <label for="vet_type">Tipo (Vermífugo/Vacina):</label>
      <input type="text" id="vet_type" name="veterinary_records[0][type]">

      <label for="vet_date">Data:</label>
      <input type="date" id="vet_date" name="veterinary_records[0][date]">

      <label for="vet_veterinarian">Veterinário Responsável:</label>
      <input type="text" id="vet_veterinarian" name="veterinary_records[0][veterinarian]">

      <label for="vet_allergies">Alergias:</label>
      <input type="text" id="vet_allergies" name="veterinary_records[0][allergies]">

      <label for="vet_comorbidities">Comorbidades:</label>
      <input type="text" id="vet_comorbidities" name="veterinary_records[0][comorbidities]">
    </div>

    <button type="button" onclick="addVeterinaryRecord()">Adicionar Registro Veterinário</button>

    <label for="history">Histórico de Saúde e Tratamentos:</label>
    <textarea id="history" name="history"></textarea>

    <button type="submit">Salvar Animal</button>
  </form>

  <!-- <script src="js/app.js"></script> -->
  <script src="../js/addAnimal.js"></script>

  <script>
    let recordIndex = 1;

    function addVeterinaryRecord() {
      const recordsContainer = document.getElementById('veterinary-records');
      
      // Criação de novos campos para outro registro veterinário
      const recordHTML = `
        <label for="vet_type_${recordIndex}">Tipo (Vermífugo/Vacina):</label>
        <input type="text" id="vet_type_${recordIndex}" name="veterinary_records[${recordIndex}][type]">

        <label for="vet_date_${recordIndex}">Data:</label>
        <input type="date" id="vet_date_${recordIndex}" name="veterinary_records[${recordIndex}][date]">

        <label for="vet_veterinarian_${recordIndex}">Veterinário Responsável:</label>
        <input type="text" id="vet_veterinarian_${recordIndex}" name="veterinary_records[${recordIndex}][veterinarian]">

        <label for="vet_allergies_${recordIndex}">Alergias:</label>
        <input type="text" id="vet_allergies_${recordIndex}" name="veterinary_records[${recordIndex}][allergies]">

        <label for="vet_comorbidities_${recordIndex}">Comorbidades:</label>
        <input type="text" id="vet_comorbidities_${recordIndex}" name="veterinary_records[${recordIndex}][comorbidities]">
      `;

      const newRecord = document.createElement('div');
      newRecord.innerHTML = recordHTML;
      recordsContainer.appendChild(newRecord);
      
      recordIndex++;
    }
    document.getElementById('add-animal-form').addEventListener('submit', addAnimal);
  </script>

</body>
</html>
